<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" type="text/css" href="static/bootstrap.min.css">
  <title>Title</title>
  <script>

    window.addEventListener("load", function (Event) {
      var queryString = window.location.search;
      var urlParams = new URLSearchParams(queryString);
      var mostra = urlParams.get('id')
      console.log(mostra);
      carica(mostra);
      link.addEventListener("click", function (e) {
        let urlApi = "http://localhost:63342/E-Commerce-Pc/demo/web/src/prova.html";
        close();
        open(urlApi);

      })
    })

    function carica(id) {
      let urlApi = "http://localhost:8080/api/get-prodotti/"

      //console.log(id)
      console.log(urlApi)
      fetch(urlApi,
              {
                method: "GET"
              }).then(function (response) {
        console.log(response)
        return response.json()
      }).then(function (data) {

        console.log(data)
        data.forEach(prodotto=>{
          let productTemplate = document.querySelector('.product').cloneNode(true);
          productTemplate.classList.remove('d-none')
          productTemplate.setAttribute("id", 'product-' + prodotto.idProdotto)
          let div=productTemplate.querySelector(`.product-image`)
          div.innerHTML=`<img src="${prodotto.linkImmagine}" >`
          let div1=productTemplate.querySelector('.product-name')
          div1.innerHTML=`${prodotto.componente}`
          let div2=productTemplate.querySelector('.product-description')
          div2.innerHTML=`${prodotto.descrizione}`
          let div3=productTemplate.querySelector('.product-price')
          div3.innerHTML=`${prodotto.prezzoDiVendita + "€"}`
          let div4=productTemplate.querySelector('.product-available')
          div4.innerHTML=`${prodotto.disponibilita}`
          document.querySelector('.products').appendChild(productTemplate)

        })


      })
    }

  </script>
</head>
<body>
<div class="product d-none">
  <div class="product-image">

  </div>
  <div>
    <label>
      Componente
    </label>
  </div>
  <div class="product-name">

  </div>


  <div >
    <label>
      Descrizione
    </label>
  </div>
  <div class="product-description">

  </div>



  <div>
    <label>
      Prezzo
    </label>
  </div>
  <div class="product-price">

  </div>

  <div>
    <label>
      Disponibilità
    </label>
  </div>
  <div class="product-available">

  </div>
</div>

<div class="products">



</div>
</body>
</html>